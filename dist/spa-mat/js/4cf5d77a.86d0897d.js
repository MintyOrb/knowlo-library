(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4cf5d77a"],{"067f":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-field ",attrs:{id:"cont"+t.inputId}},[s("q-input",{staticClass:"search",attrs:{type:"text","float-label":"Search"},on:{click:function(t){t.stopPropagation(),t.preventDefault()},focus:function(e){t.hidden=!1},blur:t.delayBlur},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),s("ul",{staticClass:"dropdown-content",class:{hide:t.hidden},staticStyle:{position:"absolute"},attrs:{id:"ac"}},t._l(t.suggestions,function(e){return s("li",{on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.pick(e)}}},[e.tag.iconURL?s("img",{staticClass:"left",attrs:{src:e.tag.iconURL}}):t._e(),s("span",[e.new?s("i",{staticClass:"material-icons  left"},[t._v("add")]):t._e(),t._v(t._s(e.translation.name)),"addTag"!=t.$route.name&&e.new?s("span",{on:{click:function(e){t.addWithDetail=!0}}},[s("i",{staticClass:"material-icons right addDetail"},[t._v("playlist_add")])]):t._e()])])}))],1)},a=[];i._withStripped=!0;s("ac6a"),s("cadf"),s("8615"),s("20d6"),s("7514"),s("7f7f");var o=s("1157"),n=s.n(o),r=s("4d5c"),c=s.n(r),l=s("5d8b"),u={props:["ajaxUrl","inputId","exclude","holderText"],components:{QInput:l["a"]},name:"search",data:function(){return{addWithDetail:!1,suggestions:[],input:"",hidden:!1,tag:{url:"",english:""},translation:{name:"",definition:"",languageCode:"en"}}},methods:{pick:function(t){this.input="",this.suggestions=[],t.translation.name.indexOf("Create new tag:")>-1?(this.tag.english=this.translation.name=t.translation.name.substr(16).trim(),this.addWithDetail?this.$router.push("/addTag/"+this.translation.name):this.quickAdd()):(t.status={includeIcon:!0},this.$emit("select",t))},delayBlur:function(){var t=this;window.setTimeout(function(){t.hidden=!0},300)},quickAdd:function(){var t=this;this.$http.post("/api/auth/set",{tag:this.tag,translation:this.translation}).then(function(e){e.data.tag?(t.$emit("select",e.data),c.a.toast('"'+e.data.translation.name+'" created!',3e3)):c.a.toast("Something went wrong...tag not added.",4e3)},function(t){401===t.status?(c.a.toast("You must be logged in to add a tag!",4e3),n()("#login-modal").modal("open")):c.a.toast("Something went wrong...are you online?",4e3)})},hide:function(){var t=this;window.setTimeout(function(){t.hidden=!0},250)}},updated:function(){"explore"===this.$route.name&&n()("#ac").appendTo("#search")},mounted:function(){var t=this;n()("#cont"+this.inputId+" input").attr("id",this.inputId);var e={inputId:this.inputId||"search-input",ajaxUrl:this.ajaxUrl||"/api/tag/search/",data:{exclude:this.exclude},minLength:1},s=n()("#"+e.inputId);if(e.ajaxUrl){var i,a,o=n()("#ac");s.on("keyup",function(n){if(i&&clearTimeout(i),0===t.input.length?t.hidden=!0:t.hidden=!1,13===n.which&&t.input.length>0&&a[0])a[0].click();else if(40!==n.which)if(38!==n.which){if(9!==n.which&&16!==n.which&&17!==n.which&&18!==n.which&&20!==n.which&&35!==n.which&&36!==n.which&&37!==n.which&&39!==n.which&&27!==n.which){console.log(e);var r=s.val().toLowerCase();r.length>e.minLength&&(i=setTimeout(function(){console.log(e.ajaxUrl+r+"/"+t.exclude),t.$http.get(e.ajaxUrl+r+"/"+t.exclude).then(function(e){t.suggestions=e.data,console.log(e),Object.values(t.suggestions).findIndex(function(e){return t.input.toLowerCase().trim()===e.translation.name.toLowerCase().trim()})&&t.suggestions.push({tag:{},translation:{name:"Create new tag: "+t.input},new:!0})},function(t){console.log(t)})},250))}}else a?(a.removeClass("selected"),c=a.prev(),a=c.length>0?c.addClass("selected"):o.find("li").last().addClass("selected")):a=o.find("li").last().addClass("selected");else if(a){a.removeClass("selected");var c=a.next();a=c.length>0?c.addClass("selected"):o.find("li").eq(0).addClass("selected")}else a=o.find("li").eq(0).addClass("selected")})}}},d=u,h=(s("7572"),s("2877")),p=Object(h["a"])(d,i,a,!1,null,null,null);p.options.__file="search.vue";e["a"]=p.exports},"1b12":function(t,e,s){},"20d6":function(t,e,s){"use strict";var i=s("5ca1"),a=s("0a49")(6),o="findIndex",n=!0;o in[]&&Array(1)[o](function(){n=!1}),i(i.P+i.F*n,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(o)},"504c":function(t,e,s){var i=s("0d58"),a=s("6821"),o=s("52a7").f;t.exports=function(t){return function(e){var s,n=a(e),r=i(n),c=r.length,l=0,u=[];while(c>l)o.call(n,s=r[l++])&&u.push(t?[s,n[s]]:n[s]);return u}}},"737b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal modal-fixed-footer",attrs:{id:"addResourceModal"}},[s("div",{staticClass:"addMeta modal-content"},[t.loaded?s("span",{staticClass:"addNav center"},[s("div",[s("span",[t._v(t._s(t.type))])])]):t._e(),t.loaded?s("flickity",{staticClass:"addSections",attrs:{options:t.flickBody}},[s("div",{staticClass:"addContainer"},[s("form",{class:{bigtop:"resource"===t.type}},["resource"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{"float-label":"URL",type:"url"},model:{value:t.resource.core.url,callback:function(e){t.$set(t.resource.core,"url",e)},expression:"resource.core.url"}})],1)]):t._e(),"icon"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{"float-label":"URL",type:"url"},model:{value:t.resource.core.mThumb,callback:function(e){t.$set(t.resource.core,"mThumb",e)},expression:"resource.core.mThumb"}})],1)]):t._e(),"resource"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{"float-label":"Title"},model:{value:t.resource.detail.title,callback:function(e){t.$set(t.resource.detail,"title",e)},expression:"resource.detail.title"}})],1)]):t._e(),"resource"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{"float-label":"Subtitle"},model:{value:t.resource.detail.subtitle,callback:function(e){t.$set(t.resource.detail,"subtitle",e)},expression:"resource.detail.subtitle"}})],1)]):t._e(),"discussion"===t.type||"definition"===t.type||"resource"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{type:"textarea","float-label":"Body Text"},model:{value:t.resource.detail.text,callback:function(e){t.$set(t.resource.detail,"text",e)},expression:"resource.detail.text"}})],1)]):t._e(),"resource"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{type:"textarea","float-label":"Source"},model:{value:t.resource.detail.source,callback:function(e){t.$set(t.resource.detail,"source",e)},expression:"resource.detail.source"}})],1)]):t._e(),"resource"===t.type?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("q-input",{attrs:{type:"textarea","float-label":"Description"},model:{value:t.resource.detail.description,callback:function(e){t.$set(t.resource.detail,"description",e)},expression:"resource.detail.description"}})],1)]):t._e()]),s("q-btn",{attrs:{color:"primary"},on:{"~click":function(e){t.upsertResource()}}},[t._v("\n      add "+t._s(t.type)+"\n    ")])],1),"discussion"===t.type||"resource"===t.type?s("div",{staticClass:"addContainer"},[s("search",{attrs:{exclude:"","input-id":"tagNewResources"},on:{select:t.addTag}}),"discussion"===t.type?s("div",[s("div",{staticClass:"disSwitch center"},[s("div",{staticClass:"switch"},[s("label",[t._v("\n \t\t\t\t\t\t\t Insight\n \t\t\t\t\t\t\t "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.discussionFilter,expression:"discussionFilter"}],attrs:{type:"checkbox",value:"insight"},domProps:{checked:Array.isArray(t.discussionFilter)?t._i(t.discussionFilter,"insight")>-1:t.discussionFilter},on:{change:function(e){var s=t.discussionFilter,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="insight",n=t._i(s,o);i.checked?n<0&&(t.discussionFilter=s.concat([o])):n>-1&&(t.discussionFilter=s.slice(0,n).concat(s.slice(n+1)))}else t.discussionFilter=a}}}),s("span",{staticClass:"lever"})])]),s("div",{staticClass:"switch"},[s("label",[t._v("\n \t\t\t\t\t\t\t Question\n \t\t\t\t\t\t\t "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.discussionFilter,expression:"discussionFilter"}],attrs:{type:"checkbox",value:"question"},domProps:{checked:Array.isArray(t.discussionFilter)?t._i(t.discussionFilter,"question")>-1:t.discussionFilter},on:{change:function(e){var s=t.discussionFilter,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="question",n=t._i(s,o);i.checked?n<0&&(t.discussionFilter=s.concat([o])):n>-1&&(t.discussionFilter=s.slice(0,n).concat(s.slice(n+1)))}else t.discussionFilter=a}}}),s("span",{staticClass:"lever"})])]),s("div",{staticClass:"switch"},[s("label",[t._v("\n \t\t\t\t\t\t\t Criticism\n \t\t\t\t\t\t\t "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.discussionFilter,expression:"discussionFilter"}],attrs:{type:"checkbox",value:"criticism"},domProps:{checked:Array.isArray(t.discussionFilter)?t._i(t.discussionFilter,"criticism")>-1:t.discussionFilter},on:{change:function(e){var s=t.discussionFilter,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="criticism",n=t._i(s,o);i.checked?n<0&&(t.discussionFilter=s.concat([o])):n>-1&&(t.discussionFilter=s.slice(0,n).concat(s.slice(n+1)))}else t.discussionFilter=a}}}),s("span",{staticClass:"lever"})])]),s("div",{staticClass:"switch"},[s("label",[t._v("\n \t\t\t\t\t\t\t Quote\n \t\t\t\t\t\t\t "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.discussionFilter,expression:"discussionFilter"}],attrs:{type:"checkbox",value:"quote"},domProps:{checked:Array.isArray(t.discussionFilter)?t._i(t.discussionFilter,"quote")>-1:t.discussionFilter},on:{change:function(e){var s=t.discussionFilter,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="quote",n=t._i(s,o);i.checked?n<0&&(t.discussionFilter=s.concat([o])):n>-1&&(t.discussionFilter=s.slice(0,n).concat(s.slice(n+1)))}else t.discussionFilter=a}}}),s("span",{staticClass:"lever"})])])])]):t._e(),s("isotope",{ref:"tagged",attrs:{list:t.tags,options:{}}},t._l(t.tags,function(e){return s("div",{key:e.setID},[s("tag",{key:e.setID,attrs:{tag:e,display:"thumb",hide:"lens include focus info pin"},on:{remove:function(s){t.removeTag(e.setID)}}})],1)}))],1):t._e()]):t._e()],1),s("div",{staticClass:"modal-footer"},[s("a",{staticClass:"waves-effect waves-blue btn-flat ",on:{click:t.closeModal}},[t._v("close")])])])},a=[];i._withStripped=!0;s("6762"),s("2fdb"),s("7f7f"),s("20d6");var o=s("1157"),n=s.n(o),r=s("4d5c"),c=s.n(r),l=s("b394"),u=s("0cd3"),d=s.n(u),h=s("067f"),p=s("ab01"),g=s("5d8b"),f=s("482e"),m={name:"addResource",components:{Flickity:l["a"],search:h["a"],isotope:d.a,tag:p["a"],QInput:g["a"],QBtn:f["a"]},props:{member:Object,type:{type:String,default:"resource"}},data:function(){return{loaded:!1,synSetMeta:!1,resouceMeta:!1,flickBody:{wrapAround:!0,pageDots:!1,prevNextButtons:!0,accessibility:!1,dragThreshold:20},discussionFilter:[],dIDs:{insight:"rJxPWooTO-",question:"B1pnQsYW-",quote:"BkF3xoFW-",criticism:"rJxYeYW43b"},tags:[],resource:{core:{url:"",source:"",mThumb:""},detail:{title:"",subtitle:"",text:"",description:"",url:""}}}},methods:{open:function(){var t=this,e=this;n()("#addResourceModal").modal({dismissible:!0,opacity:.5,inDuration:300,outDuration:200,ready:function(t,s){n()(".fullPage").css("overflow","hidden"),e.loaded=!0},complete:function(){n()(".fullPage").css("overflow","auto"),t.$emit("close")}}).modal("open")},closeModal:function(){n()("#addResourceModal").modal("close")},tagToResource:function(){this.resource.core.uid.length>0?this.$http.put("/api/auth/resource/"+this.$route.params.uid+"/discussion/"+this.resource.core.uid).then(function(t){t.data?console.log("tagged to resource"):c.a.toast("Something went wrong...",4e3)},function(t){c.a.toast("Something went wrong...are you online and logged in?",4e3)}):c.a.toast("Add a resource before taggging!",4e3)},tagToSet:function(){this.resource.core.uid.length>0?this.$http.put("/api/auth/set/"+this.$route.params.uid+"/meta/"+this.resource.core.uid,{type:this.type}).then(function(t){t.data?console.log("tagged to set"):c.a.toast("Something went wrong...",4e3)},function(t){c.a.toast("Something went wrong...are you online and logged in?",4e3)}):c.a.toast("Add a resource before taggging!",4e3)},addTag:function(t){var e=this;console.log("in add tag ",t),this.resource.core.uid.length>0?this.$http.put("/api/auth/resource/"+this.resource.core.uid+"/set/"+t.setID).then(function(t){t.data?(console.log(t.data),e.tags.push(t.data)):c.a.toast("Something went wrong...",4e3)},function(t){c.a.toast("Something went wrong...are you online and logged in?",4e3)}):c.a.toast("Add a resource before tagging!",4e3)},removeTag:function(t){var e=this;this.$http.delete("/api/auth/resource/"+this.resource.core.uid+"/set/"+t).then(function(s){s.data?e.tags.splice(e.tags.findIndex(function(e){return e.setID===t}),1):c.a.toast("Something went wrong...",4e3)},function(t){c.a.toast("Something went wrong...are you online and logged in?",4e3)})},getSuggestedTags:function(){var t=this,e="";e=e.concat(" "+this.resource.detail.title," "+this.resource.detail.subtitle," "+this.resource.detail.text," "+this.resource.detail.description),this.$http.put("/api/auth/resource/"+this.resource.core.uid+"/tagSuggest",{text:e}).then(function(e){e.data?t.tags=e.data:c.a.toast("Something went wrong...",4e3)},function(t){c.a.toast("Something went wrong...are you online and logged in?",4e3)})},close:function(){console.log("close here after esc")},checkURL:function(){},upsertResource:function(){var t=this;this.$http.post("/api/auth/resource",{resource:this.resource}).then(function(e){if(e.data){t.resource.core=e.data;var s={memberVote:{qualtiy:null,complexity:null},globalVote:{qualtiy:null,complexity:null},votes:0};for(var i in t.resourceMeta?t.tagToResource():t.synSetMeta&&(t.tagToSet(),n()("#addResourceModal").modal("close")),s.resource=t.resource.core,t.resource.detail)s.resource[i]=t.resource.detail[i];t.$emit("added",s),t.synSetMeta||t.getSuggestedTags()}else c.a.toast("Something went wrong...",4e3)},function(t){c.a.toast("Something went wrong...are you online?",4e3)})}},mounted:function(){"resource"===this.$route.name?(this.resourceMeta=!0,n()("#addResourceModal").css("position","sticky")):"tag"===this.$route.name&&(this.synSetMeta=!0),this.open(),n()(".modal-overlay").eq(1).appendTo(".resourceModal"),n()(".modal-overlay").eq(1).appendTo("#tagModal")},beforeRouteLeave:function(t,e,s){n()("#addResourceModal")&&(window.setTimeout(function(){s()},375),document.removeEventListener("keydown",function(){}))},watch:{discussionFilter:function(t,e){for(var s in t)e.includes(t[s])||this.addTag({setID:this.dIDs[t[s]]});for(var i in e)t.includes(e[i])||this.removeTag(this.dIDs[e[i]])}}},v=m,w=(s("7f00"),s("2877")),y=Object(w["a"])(v,i,a,!1,null,null,null);y.options.__file="addResource.vue";e["default"]=y.exports},"751b":function(t,e,s){},7572:function(t,e,s){"use strict";var i=s("751b"),a=s.n(i);a.a},"7f00":function(t,e,s){"use strict";var i=s("1b12"),a=s.n(i);a.a},8615:function(t,e,s){var i=s("5ca1"),a=s("504c")(!1);i(i.S,"Object",{values:function(t){return a(t)}})}}]);